{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}

<div class="container stats">

    <h1>Réservations</h1>

    {% crispy filter.form %}

    <table class="table table-striped table-hover booking-stats">
        <tr>
            <th></th>
            <th>CA</th>
            <th>%</th>
            <th>Nuitées</th>
            <th>%</th>
            <th>prix</th>
        </tr>
        <tr>
            <th>Terrain EEDF</th>
            <td>{{ stats_terrain_eedf.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_terrain_eedf.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_terrain_eedf.overnights }}</td>
            <td>{{ stats_terrain_eedf.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_terrain_eedf.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>Terrain ext</th>
            <td>{{ stats_terrain_ext.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_terrain_ext.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_terrain_ext.overnights }}</td>
            <td>{{ stats_terrain_ext.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_terrain_ext.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>Village EEDF</th>
            <td>{{ stats_village_eedf.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_village_eedf.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_village_eedf.overnights }}</td>
            <td>{{ stats_village_eedf.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_village_eedf.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>Village externe</th>
            <td>{{ stats_village_ext.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_village_ext.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_village_ext.overnights }}</td>
            <td>{{ stats_village_ext.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_village_ext.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>Terrain</th>
            <td>{{ stats_terrain.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_terrain.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_terrain.overnights }}</td>
            <td>{{ stats_terrain.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_terrain.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>Village</th>
            <td>{{ stats_village.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_village.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_village.overnights }}</td>
            <td>{{ stats_village.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_village.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>EEDF</th>
            <td>{{ stats_eedf.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_eedf.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_eedf.overnights }}</td>
            <td>{{ stats_eedf.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_eedf.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>Externe</th>
            <td>{{ stats_ext.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_ext.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_ext.overnights }}</td>
            <td>{{ stats_ext.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_ext.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>1er trimestre</th>
            <td>{{ stats_q1.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_q1.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_q1.overnights }}</td>
            <td>{{ stats_q1.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_q1.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>2ème trimestre</th>
            <td>{{ stats_q2.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_q2.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_q2.overnights }}</td>
            <td>{{ stats_q2.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_q2.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>3ème trimestre</th>
            <td>{{ stats_q3.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_q3.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_q3.overnights }}</td>
            <td>{{ stats_q3.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_q3.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>4ème trimestre</th>
            <td>{{ stats_q4.amount_hosting|floatformat:"0" }} €</td>
            <td>{{ stats_q4.amount_hosting_rate|floatformat:"0" }} %</td>
            <td>{{ stats_q4.overnights }}</td>
            <td>{{ stats_q4.overnights_rate|floatformat:"0" }} %</td>
            <td>{{ stats_q4.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>Hébergement</th>
            <td>{{ stats.amount_hosting|floatformat:"0" }} €</td>
            <td></td>
            <td>{{ stats.overnights }}</td>
            <td></td>
            <td>{{ stats.overnight_cost|floatformat:"2" }} €</td>
        </tr>
        <tr>
            <th>Contrat de coopération</th>
            <td>{{ stats.amount_cot|floatformat:"0" }} €</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <th>Matériel, consommables</th>
            <td>{{ stats.amount_other|floatformat:"0" }} €</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <th>Total</th>
            <td>{{ stats.amount|floatformat:"0" }} €</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>

{% endblock content %}


{% block js %}

    {{ block.super }}

    <script>
        $('select, :checkbox').change(function() {$('form').submit()});
    </script>

{% endblock js %}
